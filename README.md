# ü§ñ AI Development System

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI –º–æ–¥–µ–ª—è–º–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–æ—É—Ç–∏–Ω–≥–æ–º, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üèÜ AI Models Ranking System
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ —Å HuggingFace –∏ Chatbot Arena
- 7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π: Reasoning, Coding, Vision, Chat, Agents, Translation, Local
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ cron
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –º–æ–¥–µ–ª–µ–π —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏

### üß† Smart AI Router
- –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –ø–æ –∑–∞–¥–∞—á–µ, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –±—é–¥–∂–µ—Ç—É
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø–∞–º—è—Ç—å —Å–µ—Å—Å–∏–π (–¥–æ 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
- **920x speedup** –±–ª–∞–≥–æ–¥–∞—Ä—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é

### üíæ Request Caching
- MD5 —Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
- TTL –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏ (1h-1week)
- SQLite-based —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### ‚è±Ô∏è Rate Limiting
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã RPM –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏
- Thread-safe —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

### üí¨ Streaming Chat
- Server-Sent Events (SSE) –¥–ª—è real-time –æ—Ç–≤–µ—Ç–æ–≤
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: –º–æ–¥–µ–ª—å, —Ç–æ–∫–µ–Ω—ã, —Å—Ç–æ–∏–º–æ—Å—Ç—å, –∫—ç—à
- Session-based –∫–æ–Ω—Ç–µ–∫—Å—Ç
- –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º

### üìä Analytics & Reports
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–æ–¥–µ–ª—è–º
- Cost breakdown –∏ token usage
- Top expensive requests
- Hourly distribution
- Cache hit/miss rate

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
autopilot-core/
‚îú‚îÄ‚îÄ agents/                    # üß† AI Logic
‚îÇ   ‚îú‚îÄ‚îÄ database.py           # SQLite ORM + Analytics
‚îÇ   ‚îú‚îÄ‚îÄ ai_router.py          # Smart Model Router
‚îÇ   ‚îú‚îÄ‚îÄ ranking_collector.py # Rankings Scraper
‚îÇ   ‚îî‚îÄ‚îÄ models.py             # Models Config
‚îú‚îÄ‚îÄ api/                      # üîå Backend
‚îÇ   ‚îî‚îÄ‚îÄ server.py            # FastAPI Server (15 endpoints)
‚îú‚îÄ‚îÄ app/                      # üé® Frontend
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx             # Dashboard
‚îÇ   ‚îú‚îÄ‚îÄ chat/                # Chat Interface
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx        # Main Chat
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ history/        # Chat History
‚îÇ   ‚îî‚îÄ‚îÄ models-ranking/      # Rankings UI
‚îú‚îÄ‚îÄ scripts/                  # üõ†Ô∏è Utils
‚îÇ   ‚îú‚îÄ‚îÄ update_rankings.py   # Cron Job
‚îÇ   ‚îú‚îÄ‚îÄ generate_report.py  # Analytics Report
‚îÇ   ‚îî‚îÄ‚îÄ setup_scheduler.sh  # Cron Setup
‚îî‚îÄ‚îÄ data/                     # üíæ Storage
    ‚îî‚îÄ‚îÄ history.db           # SQLite Database
```

## üöÄ Quick Start

### Prerequisites
- Python 3.11+
- Node.js 18+
- npm/pnpm

### üîê Environment Setup

#### 1. Create .env file

```bash
cp .env.example .env
```

#### 2. Generate SECRET_KEY

The SECRET_KEY is required for JWT authentication. Generate a secure key:

```bash
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

Copy the output and paste into `.env`:

```bash
SECRET_KEY=your-generated-secret-here
```

#### 3. Add API Keys

Get API keys from these providers:
- **Gemini**: https://ai.google.dev/
- **Grok**: https://x.ai/
- **OpenRouter**: https://openrouter.ai/

Add to `.env`:

```bash
GEMINI_API_KEY=your-key-here
GROK_API_KEY=your-key-here
OPENROUTER_API_KEY=your-key-here
```

#### 4. Verify Setup

```bash
source venv/bin/activate
python -c "import os; from dotenv import load_dotenv; load_dotenv(); print('‚úÖ SECRET_KEY:', 'SET' if os.getenv('SECRET_KEY') else '‚ùå NOT SET'); print('‚úÖ GEMINI_API_KEY:', 'SET' if os.getenv('GEMINI_API_KEY') else '‚ùå NOT SET')"
```

### Backend Setup
```bash
cd ~/autopilot-core

# Create virtual environment
python3 -m venv venv
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt --break-system-packages

# Configure API keys
export GEMINI_API_KEY="your-key"
export GROK_API_KEY="your-key"
export OPENROUTER_API_KEY="your-key"

# Start API server
python api/server.py
# ‚Üí http://localhost:8000
# ‚Üí Docs: http://localhost:8000/docs
```

### Frontend Setup
```bash
cd ~/autopilot-core

# Install dependencies
npm install

# Start dev server
npm run dev
# ‚Üí http://localhost:3000
```

## üìä Database Schema

### Core Tables
- `requests` - –ò—Å—Ç–æ—Ä–∏—è AI –∑–∞–ø—Ä–æ—Å–æ–≤
- `chat_sessions` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏
- `session_messages` - –°–æ–æ–±—â–µ–Ω–∏—è –≤ —Å–µ—Å—Å–∏—è—Ö
- `request_cache` - –ö—ç—à –æ—Ç–≤–µ—Ç–æ–≤ (MD5 —Ö—ç—à)
- `ranking_sources` - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
- `ai_model_rankings` - –¢–æ–ø –º–æ–¥–µ–ª–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

## üîå API Endpoints

### Authentication üîê
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/auth/login` - –í—Ö–æ–¥ (–ø–æ–ª—É—á–∏—Ç—å JWT —Ç–æ–∫–µ–Ω)
- `GET /api/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (protected)
- `GET /api/protected-example` - –ü—Ä–∏–º–µ—Ä –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ endpoint

### Chat
- `POST /api/chat` - Single request
- `POST /api/chat/stream` - Streaming (SSE)
- `GET /api/chat/history` - –ò—Å—Ç–æ—Ä–∏—è

### Sessions
- `POST /api/sessions/create` - –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è
- `GET /api/sessions` - –°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π
- `GET /api/sessions/{id}/messages` - –°–æ–æ–±—â–µ–Ω–∏—è
- `DELETE /api/sessions/{id}` - –£–¥–∞–ª–∏—Ç—å

### Stats & Rankings
- `GET /api/stats` - –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/models/rankings` - –†–µ–π—Ç–∏–Ω–≥–∏ –º–æ–¥–µ–ª–µ–π
- `GET /api/models/status` - –°—Ç–∞—Ç—É—Å –º–æ–¥–µ–ª–µ–π

### Management
- `GET /api/health` - Health check
- `POST /api/rankings/update` - –û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥–∏

## üé® Features

### Dashboard
- Total Requests counter
- Active Models count
- Total Cost tracker
- Average Cost/Request
- Quick navigation cards

### Chat Interface
- ‚úÖ Streaming responses (SSE)
- ‚úÖ Context Memory (session-based)
- ‚úÖ Cache indicators
- ‚úÖ Model/tokens/cost display
- ‚úÖ New Chat button
- ‚úÖ Settings panel (Task Type, Budget, Complexity)

### Models Ranking
- 7 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —Ç–æ–ø-3 –º–æ–¥–µ–ª—è–º–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
- Score, Rank, Notes
- Source links
- Best use cases
- Last update dates

### Chat History
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ/–º–æ–¥–µ–ª–∏
- Export –≤ Markdown
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–µ—Å—Å–∏–∏
- –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π

## üìà Performance

### Caching Impact
- First request: ~1.25s (API call)
- Cached request: ~0.001s (920x faster!)
- Cost savings: $0 for cached requests

### Rate Limits (RPM)
- Gemini 2.0 Flash: 60 RPM
- DeepSeek Chat: 30 RPM
- Grok Beta: 30 RPM
- GPT-4o: 50 RPM
- Claude Sonnet: 50 RPM

### Database Performance
- Cache hit rate: ~40%
- Average query time: <10ms
- Concurrent requests: 50+

## üõ†Ô∏è Scripts & Automation

### Weekly Rankings Update
```bash
python scripts/update_rankings.py --days 7
```

### Setup Cron Job
```bash
chmod +x scripts/setup_scheduler.sh
./scripts/setup_scheduler.sh
# Runs every Monday at 9:00 AM
```

### Generate Analytics Report
```bash
python scripts/generate_report.py --days 7
```

## üìä Analytics Report Example

```
ü§ñ AI MODELS PERFORMANCE REPORT
Period: Last 7 days
Generated: 2025-10-30 15:00:00

üìä SUMMARY
  Total Requests:  1,247
  Total Tokens:    156,892
  Total Cost:      $12.4567
  Unique Models:   8
  Unique Tasks:    5

üéØ MODELS PERFORMANCE
  Model                    Requests   Success   Tokens      Cost
  deepseek/deepseek-chat   524        100.0%    89,234      $8.92
  gemini-2.0-flash         312        100.0%    31,245      $0.00
  gpt-4o                   187        98.9%     28,156      $2.82

üíæ CACHE STATISTICS
  Total Entries:     89
  Total Uses:        456
  Avg Uses/Entry:    5.1
```

## üîê Environment Variables

See [.env.example](.env.example) for the complete list of environment variables.

**Required:**
- `SECRET_KEY` - JWT secret (generate with: `python -c "import secrets; print(secrets.token_urlsafe(32))"`)
- `GEMINI_API_KEY` - Google Gemini API key
- `GROK_API_KEY` - xAI Grok API key
- `OPENROUTER_API_KEY` - OpenRouter API key

**Optional:**
- `TELEGRAM_BOT_TOKEN` - For ranking update notifications
- `TELEGRAM_CHAT_ID` - Telegram chat ID for notifications
- `DATABASE_PATH` - Custom SQLite database path (default: `./data/history.db`)
- `HOST` - Server host (default: `0.0.0.0`)
- `PORT` - Server port (default: `8000`)

## üêõ Troubleshooting

### Backend –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å Python –≤–µ—Ä—Å–∏—é
python --version  # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å 3.11+

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt --break-system-packages
```

### Frontend –æ—à–∏–±–∫–∏
```bash
# –û—á–∏—Å—Ç–∏ –∫—ç—à
rm -rf .next node_modules
npm install
npm run dev
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f "python api/server.py"

# –£–¥–∞–ª–∏ lock —Ñ–∞–π–ª
rm -f data/history.db-journal
```

## üìö Documentation

- **API Docs**: http://localhost:8000/docs
- **Project Rules**: `.cursorrules`
- **Prompts Guide**: `PROMPTS.md`
- **Status**: `STATUS.md`

## üöÄ Roadmap

### –ö—Ä–∏—Ç–∏—á–Ω–æ (Priority 1)
- [x] ~~JWT Authentication~~ ‚úÖ **COMPLETED**
- [ ] API Security (rate limiting per user)
- [ ] Docker containerization
- [ ] Code Agent (—Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç)

### –í–∞–∂–Ω–æ (Priority 2)
- [ ] Chat History UI (filters, export)
- [ ] File Upload (PDF, DOCX, images)
- [ ] Theme toggle (dark/light)
- [ ] Unit tests (>80% coverage)

### –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (Priority 3)
- [ ] Mobile app (React Native)
- [ ] Multi-tenancy
- [ ] A/B testing models
- [ ] Telegram bot integration

## ü§ù Contributing

1. Fork the repo
2. Create feature branch
3. Follow `.cursorrules` style
4. Test changes
5. Submit PR

## üìÑ License

MIT License

## üë§ Author

**Your Name**
- GitHub: [@yourusername](https://github.com/yourusername)
- Email: your.email@example.com

---

**Built with ‚ù§Ô∏è using FastAPI, Next.js, and multiple AI models**